<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>Boulder Food Rescue</title>
	<link type="text/css" rel="stylesheet" href="themes/BFRmain.css" />
	
	<script type="text/javascript" src="js/jquery-2.1.3.js"></script>

	<script>
        $(function () {
            $("#loginForm").on("submit", function (y) {
                //disable the button so we can't resubmit while we wait
                $("#submitButton", this).attr("disabled", "disabled");
                var e = $("#email").val();
                var p = $("#password").val();
                $.ajax({
                    type: "POST",
                    url: "http://dev.boulderfoodrescue.org/volunteers/sign_in.json",
                    data: { email: e, password: p },
                    success: function (data) {
                        console.log("Success (sign_in)");
                        window.sessionStorage.token = data.authentication_token;
                        window.sessionStorage.email = e;
                        window.location = ("home.html");
                    },
                    error: function (msg) {
                        console.log("Error (sign_in)");
                    }
                });
                $("#submitButton").removeAttr("disabled");
            });
        });
        
    </script>
    <script>
        $(function () {
            $("hitButton", this).attr("disabled", "disabled");
            $.ajax({
                type: "DELETE",
                url: "http://dev.boulderfoodrescue.org/volunteers/sign_out.json",
                data: { volunteer_email: window.sessionStorage.email, volunteer_token: window.sessionStorage.token },
                success: function (data) {
                    window.location = ("index.html");
                },
                error: function (msg) {
                    //alert(JSON.stringify(msg));
                }
            });
            //}
        });
    </script>
</head>
<body onload="init()">
	<div data-role="page" id="reposHome">  
		<div data-role="content" id="contentConfirmation" name="contentConfirmation" align="center">
            <img src="../img/icons/BFRlogo.jpg" class="logo" />
   
			<form id="loginForm">  
				<div data-role="fieldcontain" class="ui-hide-label">
					<label for="email">Email</label>
					<input type="text" name="email" id="email" value="" placeholder="Email" />
				</div>
				<div data-role="fieldcontain" class="ui-hide-label">
					<label for="password">Password</label>
					<input type="password" name="password" id="password" value="" placeholder="Password" />
				</div>

                <div id="submitButton">
                    <h4>Login</h4>
                </div>

				<!--<input type="submit" value="Login" id="submitButton" />-->
			</form> 
		</div> 
	</div>

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/angular.min.js"></script>
    <script type="text/javascript" src="js/angular-route.min.js"></script>
	
	<!-- End of page so it gets loaded last -->
	<script type="text/javascript" src="js/index.js"></script>
</body>
</html>