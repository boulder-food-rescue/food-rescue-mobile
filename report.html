 <!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>Boulder Food Rescue</title>
	<link rel="stylesheet" href="themes/Bootstrap.css">
	<link rel="stylesheet" href="themes/application.css">
	
<!--	<script href="themes/js/boostrap-dropdown.js"></script>
	<script href="themes/js/boostrap-dropdown_2-1-1.js"></script>-->
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.0/jquery.mobile.structure-1.4.0.min.css" />
	<link rel="stylesheet" href="themes/jquery.mobile.icons.min.css" />
    <link rel="stylesheet" type="text/css" href="themes/jquery.mobile.min.css" />
	<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
	<script src="http://code.jquery.com/mobile/1.4.0/jquery.mobile-1.4.0.js"></script>
    <script type="text/javascript" src="themes/js/moment.min.js"></script>

	<!-- DatePicker -->	
	<!--<link rel="stylesheet" type="text/css" href="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.min.css" /> 
	<script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.core.min.js"></script>
	<script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.mode.flipbox.min.js"></script>
	<script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/i18n/jquery.mobile.datebox.i18n.en_US.utf8.js"></script>	-->

	<script type="text/javascript">
	    var now = new Date();
	    var strDate = now.getFullYear() + '-' + (now.getMonth() + 1) + '-' + now.getDate();
	    function TripDate(dt, formDate) {
	        this.date = dt;
	        this.formatedDate = formDate;
	        this.end = "</div></div>";
	    }

	    TripDate.prototype.begin = function () {
	        return "<div data-role='collapsible-set' data-corners='false' style='margin: .2em;' class='ui-collapsible-set'>" +
                         "<div data-role='collapsible' id='" + this.date + "' class='ui-collapsible ui-collapsible-inset ui-collapsible-themed-content'>";
	    };

	    TripDate.prototype.getHeader = function () {
	        return "<h3 class='ui-collapsible-heading'> \
                             <a href='#' class='ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-btn-inherit ui-icon-minus'>"
                             + this.formatedDate +
                             "<span class='ui-collapsible-heading-status'> click to collapse contents</span></a></h3>";
	    };

	    TripDate.prototype.render = function (appendId) {
	        $(this.begin() + this.getHeader() + this.end).appendTo(appendId);
	    };

	    function Trip(donor, dId, dt) {
	        this.top = "<div class='ui-collapsible-content ui-body-inherit' aria-hidden='false'> \
                        <div data-role='collapsible-set' data-corners='false' style='margin: .2em;' class='ui-collapsible-set ui-group-theme-inherit'> \
                        <div data-role='collapsible' class='ui-collapsible ui-collapsible-inset ui-collapsible-themed-content ui-last-child'>";
	        this.bottom = "</div>";
	        this.donorName = donor;
	        this.donorId = dId;
	        this.date = dt;
	        this.inputPanel = "                                                <fieldset class='ui-grid-a'> \
                                                    <div class='ui-block-a' style='width:60%; height: 10%;'> \
				                                            <select class='drop_button' name='volunteers' id='volunteers'> \
					                                            <option>Food</option> \
					                                            <option value='1'>Produce</option> \
					                                            <option value='2'>Bread</option> \
					                                            <option value='3'>Water</option> \
				                                            </select> \
			                                            <!--</div>/ui-btn--> \
                                                    </div> \
                                                    <div class='ui-block-b' style='width:20%'> \
                                                        <input type='text' name='weight' id='name' value=''/> \
                                                    </div> \
                                                    <div class='ui-block-c' style='width:20%; text-align:center; vertical-align:middle;'> \
                                                        <div class='field_title' data-role='fieldcontain'> \
                                                            <label style='color: #DB5432; font: 15px/1 'Trebuchet MS', Arial;' for='name'>lbs/kg</label> \
                                                        </div> \
                                                    </div> \
                                                </fieldset> \
                                                <fieldset class='ui-grid-b'> \
                                                    <div class='ui-block-a' style='width:20%; text-align:center; vertical-align:middle;'> \
                                                        <div class='field_title' data-role='fieldcontain'> \
                                                            <label style='color: #DB5432; font: 15px/1 'Trebuchet MS', Arial;' for='name'>Items:</label> \
                                                        </div> \
                                                    </div> \
                                                    <div class='ui-block-b' style='width:80%'> \
                                                        <input type='text' name='weight' id='Text1' value=''/> \
                                                    </div> \
                                                </fieldset> \
                                                <fieldset class='ui-grid-a'> \
                                                    <div class='ui-block-a' style='width:60%'> \
				                                            <select class='drop_button' name='volunteers' id='Select1'> \
					                                            <option>Food</option> \
					                                            <option value='1'>Produce</option> \
					                                            <option value='2'>Bread</option> \
					                                            <option value='3'>Water</option> \
				                                            </select> \
			                                            <!--</div>/ui-btn--> \
                                                    </div> \
                                                    <div class='ui-block-b' style='width:20%'> \
                                                        <input type='text' name='weight' id='Text2' value=''/> \
                                                    </div> \
                                                    <div class='ui-block-c' style='width:20%; text-align:center; vertical-align:middle;'> \
                                                        <div class='field_title' data-role='fieldcontain'> \
                                                            <label style='color: #DB5432; font: 15px/1 'Trebuchet MS', Arial;' for='name'>lbs/kg</label> \
                                                        </div> \
                                                    </div> \
                                                </fieldset> \
                                                <fieldset class='ui-grid-b'> \
                                                    <div class='ui-block-a' style='width:20%; text-align:center; vertical-align:middle;'> \
                                                        <div class='field_title' data-role='fieldcontain'> \
                                                            <label style='color: #DB5432; font: 15px/1 'Trebuchet MS', Arial;' for='name'>Items:</label> \
                                                        </div> \
                                                    </div> \
                                                    <div class='ui-block-b' style='width:80%'> \
                                                        <input type='text' name='weight' id='Text3' value=''/> \
                                                    </div> \
                                                </fieldset> \
                                                </div><!--/collapsible--> \
                                                    <div data-role='collapsible'> \
	                                                    <!-- <h3>Vitamin Cottage</h3> -->\
                                                        <fieldset class='ui-grid-a'> \
                                                            <div class='ui-block-a' style='width:60%'> \
				                                                    <select class='drop_button' name='volunteers' id='Select2'> \
					                                                    <option>Food</option> \
					                                                    <option value='1'>Produce</option> \
					                                                    <option value='2'>Bread</option> \
					                                                    <option value='3'>Water</option> \
				                                                    </select> \
                                                            </div> \
                                                            <div class='ui-block-b' style='width:20%'> \
                                                                <input type='text' name='weight' id='Text4' value=''/> \
                                                            </div> \
                                                            <div class='ui-block-c' style='width:20%; text-align:center; vertical-align:middle;'> \
                                                                <div class='field_title' data-role='fieldcontain'> \
                                                                    <label style='color: #DB5432; font: 15px/1 'Trebuchet MS', Arial;' for='name'>lbs/kg</label> \
                                                                </div> \
                                                            </div> \
                                                        </fieldset> \
                                                        <fieldset class='ui-grid-b'> \
                                                            <div class='ui-block-a' style='width:20%; text-align:center; vertical-align:middle;'> \
                                                                <div class='field_title' data-role='fieldcontain'> \
                                                                    <label style='color: #DB5432; font: 15px/1 'Trebuchet MS', Arial;' for='name'>Items:</label> \
                                                                </div> \
                                                            </div> \
                                                            <div class='ui-block-b' style='width:80%'> \
                                                                <input type='text' name='weight' id='Text5' value=''/> \
                                                            </div> \
                                                        </fieldset> \
                                                        <fieldset class='ui-grid-a'> \
                                                            <div class='ui-block-a' style='width:60%'> \
				                                                    <select class='drop_button' name='volunteers' id='Select3'> \
					                                                    <option>Food</option> \
					                                                    <option value='1'>Produce</option> \
					                                                    <option value='2'>Bread</option> \
					                                                    <option value='3'>Water</option> \
				                                                    </select> \
                                                            </div> \
                                                            <div class='ui-block-b' style='width:20%'> \
                                                                <input type='text' name='weight' id='Text6' value=''/> \
                                                            </div> \
                                                            <div class='ui-block-c' style='width:20%; text-align:center; vertical-align:middle;'> \
                                                                <div class='field_title' data-role='fieldcontain'> \
                                                                    <label style='color: #DB5432; font: 15px/1 'Trebuchet MS', Arial;' for='name'>lbs/kg</label> \
                                                                </div> \
                                                            </div> \
                                                        </fieldset> \
                                                        <fieldset class='ui-grid-b'> \
                                                            <div class='ui-block-a' style='width:20%; text-align:center; vertical-align:middle;'> \
                                                                <div class='field_title' data-role='fieldcontain'> \
                                                                    <label style='color: #DB5432; font: 15px/1 'Trebuchet MS', Arial;' for='name'>Items:</label> \
                                                                </div> \
                                                            </div> \
                                                            <div class='ui-block-b' style='width:80%'> \
                                                                <input type='text' name='weight' id='Text7' value=''/> \
                                                            </div> \
                                                        </fieldset> \
                                                    </div><!--/collapsible--> \
                                            </div><!--/collapsible-set--> \
                                            <div class='div_dim'> \
				                                    <select class='drop_button' name='volunteers' id='Select4'> \
					                                    <option value='Bicycle'>Bicycle</option> \
				                                        <option value='Foot'>Foot</option> \
                                                        <option value='Car'>Car</option> \
                                                        <option value='Truck'>Truck</option> \
                                                        <option value='Van'>Van</option> \
                                                        <option value='Motorcycle'>Motorcycle</option> \
                                                        <option value='Golfcart'>Golf cart</option> \
				                                    </select> \
			                                    </div> \
                                                <div class='div_dim'> \
                                                    <div class='field_title' data-role='fieldcontain'> \
			                                            <label style='color: #DB5432; font: 15px/1 'Trebuchet MS', Arial;' for='textarea'> \
				                                            Notes: \
			                                            </label> \
			                                            <textarea cols='40' rows='8' name='notes' id='textarea'> \
                                                        </textarea> \
		                                            </div> \
                                                </div> \
                                                 <div class='div_dim'> \
                                                    <input type='submit' value='Save Changes' id='submitButton'> \
                                                </div>";
	    }

	    Trip.prototype.getHeader = function () {
	        return "<h3 class='ui-collapsible-heading'>\
                            <a href='#' class='ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-btn-inherit ui-icon-minus'>"
                            + this.donorName +
                            "<span class='ui-collapsible-heading-status'> click to collapse contents</span>\
                           </a>\
                       </h3>";
	    };

	    Trip.prototype.appendTo = function (appendTo) {
	        $(this.top + this.getHeader() + this.inputPanel + this.bottom).appendTo(appendTo);
	    };

	    //                        $.getJSON('http://dev.boulderfoodrescue.org/logs/mine_past.json', function (data) {

	    //                        //document.getElementById("placeholder").innerHTML=data.complete+" "+data.created_at+" "+data.donor_id;

	    //                            var output = "<ul>";
	    //                            for (var i in data) {
	    //                                output += "<li>" + data[i].complete + " " + data[i].created_at + "--" + data[i].donor_id + "</li>";
	    //                            }

	    //                            output += "</ul>";
	    //                            document.getElementById("placeholder").innerHTML = output;
	    //                        });
	    //$(document).ready(function () {
	    //$(window).load(function () {
	    //function pageLoad(){
	    //$("#btnjson").click(function () {
	    $.ajax({
	        type: "GET",
	        url: "http://dev.boulderfoodrescue.org/logs/mine_past.json",
	        data: { volunteer_email: window.sessionStorage.email, volunteer_token: window.sessionStorage.token },
	        success: function (data) {



	            //alert(JSON.stringify(data));
	            var varIncomplete = ""
	            var varShiftDate = ""
	            var varDonorID = ""
	            var varDonorName = ""
	            /* var varBegin = "<div data-role='collapsible-set' data-corners='false' style='margin: .2em;'> \
	            <div data-role='collapsible'><h3>";
	            var varDonorID1 = "</h3> \
	            <div data-role='collapsible-set' data-corners='false' style='margin: .2em;'> \
	            <div data-role='collapsible'> <h3>";
	            */
	            $.each(data, function () {
	                var tripDate = this.when;
	                if (!this.complete) {

	                    varShiftDate = moment(tripDate).format('ddd' + ' - ' + 'DD MMM YYYY');
	                    if ($("#" + varShiftDate).size() < 1) {
	                        var dateWidget = new TripDate(tripDate, varShiftDate);
	                        dateWidget.render("#divReport");
	                    }
	                    // $(varBegin + varShiftDate + varDonorID1 + varEnd).appendTo('#divReport').trigger("create");

	                    //alert(varDonorID);

	                    $.ajax({
	                        type: "GET",
	                        url: "http://dev.boulderfoodrescue.org/locations/" + this.donor_id + ".json",
	                        data: { volunteer_email: window.sessionStorage.email, volunteer_token: window.sessionStorage.token },
	                        success: function (response) {
	                            //Set Location Name
	                            //$(data).each(function () {
	                            var trip = new Trip(response.name, response.id, tripDate);
	                                trip.appendTo("#" + tripDate);
	                            //});

	                        },
	                        error: function (msg) {
	                            // alert(JSON.stringify(msg));
	                        }
	                    });

	                }

	            });

	        }
	    });

	    //});

	    //$.getJSON("http://dev.boulderfoodrescue.org/logs/mine_past.json", function (ajaxresult) {







	    //	    $.getJSON("http://dev.boulderfoodrescue.org/logs/open.json", function (data) {
	    //	        var items = [];
	    //	        $.each(data, function (key, val) {
	    //	            items.push("<li id='" + key + "'>" + val + "</li>");
	    //	        });

	    //	        $("<ul/>", {
	    //	            "class": "my-new-list",
	    //	            html: items.join("")
	    //	        }).appendTo("body");
	    //	    });


	    //	    $(function () {


	    //	        var people = [];

	    //	        $.getJSON('http://dev.boulderfoodrescue.org/logs/todo.json', function (data) {
	    //	            $.each(data.person, function (i, f) {
	    //	                var tblRow = "<tr>" + "<td>" + f.firstName + "</td>" +
	    //           "<td>" + f.lastName + "</td>" + "<td>" + f.job + "</td>" + "<td>" + f.roll + "</td>" + "</tr>"
	    //	                $(tblRow).appendTo("#userdata tbody");
	    //	            });

	    //	        });

	    //	    });

	    //	    $(document).ready(function () {
	    //	        $("#aToday").click(function () {
	    //	            $.getJSON("http://dev.boulderfoodrescue.org/logs/todo.json", function (result) {
	    //	                $.each(result, function (i, field) {
	    //	                    $("div").append(field + " ");
	    //	                });
	    //	            });
	    //	        });
	    //	    });


	    //	    $(function () {
	    //	        $.ajax({
	    //	            type: "GET",
	    //	            url: "http://dev.boulderfoodrescue.org/logs/todo.json",
	    //	            data: { volunteer_email: window.sessionStorage.email, volunteer_token: window.sessionStorage.token },
	    //	            success: function (data) {
	    //	                alert(JSON.stringify(data));
	    //	                //alert(JSON.stringify(data[0].donor_id));
	    //	                //alert(JSON.stringify(data));
	    //	                var data_id = (data.length - 1);
	    //	                if ((data[data_id]).id) {
	    //	                    result = (data[data_id]).id;
	    //	                    //alert((data[data_id]).id);
	    //	                }

	    //	                $("#frmReport").on("submit", function (y) {
	    //	                    $("#submitButton", this).attr("disabled", "disabled");
	    //	                    //alert(getFormData());
	    //	                    $.ajax({
	    //	                        type: "PUT",
	    //	                        url: "http://dev.boulderfoodrescue.org/logs/" + result + ".json",
	    //	                        data: { volunteer_email: window.sessionStorage.email, volunteer_token: window.sessionStorage.token
	    //	                        },
	    //	                        success: function (data) {
	    //	                            //alert("success");
	    //	                        },
	    //	                        error: function (msg) {
	    //	                            //alert( JSON.stringify(msg) );
	    //	                        }
	    //	                    });
	    //	                    $("#submitButton").removeAttr("disabled");
	    //	                });
	    //	            },
	    //	            error: function (msg) {
	    //	                //alert( JSON.stringify(msg) );
	    //	            }
	    //	        });
	    //	    });

	    //	    function getFormData() {
	    //	        var data = "";
	    //	        var $textInputs = $("input:text");
	    //	        for (i = 0; i < $textInputs.length; i++) {
	    //	            if ($textInputs[i].value) {
	    //	                data += $textInputs[i].name + ": " + $textInputs[i].value + ", ";
	    //	            }
	    //	        }
	    //	        var $selectInputs = $("select");
	    //	        for (i = 0; i < $selectInputs.length; i++) {
	    //	            if ($selectInputs[i].value) {
	    //	                data += $selectInputs[i].name + ": " + $selectInputs[i].value + ", ";
	    //	            }
	    //	        }
	    //	        var $textAreaInputs = $("textarea");
	    //	        for (i = 0; i < $textAreaInputs.length; i++) {
	    //	            if ($textAreaInputs[i].value) {
	    //	                data += $textAreaInputs[i].name + ": " + $textAreaInputs[i].value + ", ";
	    //	            }
	    //	        }
	    //	        var $checkboxInputs = $("input:checkbox");
	    //	        if ($checkboxInputs.is(":checked")) {
	    //	            data += $checkboxInputs[0].name + ": " + "true" + ",";
	    //	        }
	    //	        else {
	    //	            data += $checkboxInputs[0].name + ": " + "false" + ",";
	    //	        }
	    //	        return data;
	    //	    }
        
           
 
	</script>
    
    <style type="text/css">
	    body, textarea {
            font-size: 1em;
            line-height: 1.3;
            font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
            }
            
        h3 {
            text-indent: 2.3em;
        }
        
       .field_title {
		    margin: 12px; 
		    color: black;
	    }
	    
        .ui-collapsible-set {margin:-15px} 
        .ui-collapsible-set .ui-listview {margin:0} 
        .ui-collapsible-content {padding:5px; margin:0; border:0}
        /*.ui-collapsible-heading .ui-btn-icon-right .ui-btn-inner {padding-left:18px}
        .ui-collapsible-heading .ui-btn-icon-right .ui-icon {right:18px}*/
        
        @media all and (max-width: 450px){
          .ui-field-contain, .ui-mobile fieldset.ui-field-contain { 
            border-width: 0px !important;
            padding: 0px !important;
            margin: 1em 0 !important; 
          }
        }
        
        fieldset {
            display: block;
            -webkit-margin-start: 2px !important;
            -webkit-margin-end: 2px !important;
            -webkit-padding-before: 0.0em !important;
            -webkit-padding-start: 0.0em !important;
            -webkit-padding-end: 0.0em !important;
            -webkit-padding-after: 0.0em !important;
            }

        table {
          border-collapse: collapse;
        }
    </style>
</head>
<body>
    <form id="frmReport">
    
	<div data-role="page" id="home">  
		<div data-position="fixed" data-role="header" data-theme="a">  
			<a style="background-color: rgba(75,115,51,0);" rel="external" data-icon="home" data-iconpos="notext" href="home.html">Home</a>  
			<h1 style="font:13px/1.5 'Trebuchet MS' bold, Arial; font-weight: bold;">
				Food Rescue Robot
			</h1> 

    		<a style="background-color: rgba(75,115,51,0);" rel="external"data-icon="power" id="logout" data-iconpos="notext">Log Out</a>

            <div data-role="header">
                <div data-role="navbar">
                    <ul>
                      <li><a href="home.html" id="aToday" data-ajax="false" style="border: .1em solid #4b7333; color: White;">Today</a></li>
                      <li><a href="#divTake" data-ajax="false" style="border: .1em solid #4b7333; color: White;">Cover</a></li>
                      <li><a href="" data-ajax="false" style="border: .1em solid #4b7333; color: White;">Due</a></li>
                    </ul>
                </div><!--/navbar-->
            </div><!--/header-->
		</div><!--/fixed header-->

        <div id="divReport">

        












        </div><!--/divReport-->

    </div><!--/home-->


    </form>

</body>
</html>